server:
  port: 8000

spring:
  security:
    oauth2:
      resourceserver:
        jwt: #配置RSA的公钥访问地址
          jwk-set-uri: http://localhost:8002/oauth2/jwks
  cloud:
    nacos:
      discovery:
        server-addr: 192.168.95.41:8848
    gateway:
      globalcors:
        corsConfigurations:
          '[/**]':
            allowedOrigins: "*"
            allowedMethods:
              - GET
              - POST
      discovery:
        locator:
          enabled: true
      default-filters:
        - StripPrefix=1
      routes:
        - id: uac
          uri: lb://uac
          filters:
            - name: Retry
              args:
                retries: 3
                statuses: BAD_GATEWAY
            - name: RequestRateLimiter
              args:
                redis-rate-limiter.replenishRate: 10
                redis-rate-limiter.burstCapacity: 20
                key-resolver: "#{@ipKeyResolver}"
          predicates:
            - Method=GET,POST
            - Path=/uac/**
        - id: cpc
          uri: lb://cpc
          filters:
            - name: Retry
              args:
                retries: 3
                statuses: BAD_GATEWAY
            - name: RequestRateLimiter
              args:
                redis-rate-limiter.replenishRate: 10
                redis-rate-limiter.burstCapacity: 20
                key-resolver: "#{@ipKeyResolver}"
          predicates:
            - Method=GET,POST
            - Path=/cpc/**
        - id: oauth2
          uri: lb://oauth2
          filters:
            - name: Retry
              args:
                retries: 3
                statuses: BAD_GATEWAY
            - name: RequestRateLimiter
              args:
                redis-rate-limiter.replenishRate: 10
                redis-rate-limiter.burstCapacity: 20
                key-resolver: "#{@ipKeyResolver}"
          predicates:
            - Method=GET,POST
            - Path=/oauth2/**
  redis:
    timeout: 5000
    cluster:
      max-redirects: 5
      nodes:
        - 192.168.95.31:6379
        - 192.168.95.32:6379
        - 192.168.95.33:6379
        - 192.168.95.36:6379
        - 192.168.95.37:6379
        - 192.168.95.38:6379
    database: 0
    jedis:
      pool:
        max-active: 8 #连接池最大连接数（使用负值表示没有限制） 默认 8
        max-idle: 8 #连接池中的最大空闲连接 默认 8
        max-wait: -1 #连接池最大阻塞等待时间（使用负值表示没有限制） 默认 -1
        min-idle: 0 #连接池中的最小空闲连接 默认 0

jwt:
  token:
    expired: 12
    refresh:
      expired: 12

